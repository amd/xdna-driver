# Maintainer: Your Name <your@email.com>
pkgname=xrt-plugin-amdxdna
pkgver=2.21.0
pkgrel=1
pkgdesc="AMD XDNA Driver plugin for Xilinx RunTime"
arch=('x86_64')
url="https://github.com/amd/xdna-driver"
license=('Apache-2.0')
depends=('xrt-base' 'xrt-npu' 'dkms' 'linux-headers')
provides=('xrt-plugin-amdxdna')
conflicts=('amdxdna-driver' 'amdxdna-driver-bin')
install=xrt-plugin-amdxdna.install

package() {
  cd "$srcdir"

  # Extract the tarball directly into the package directory
  tar -xzf /home/kashif/Downloads/xdna-driver/build/Release/xrt_plugin.2.21.0_-x86_64-amdxdna.tar.gz -C "$pkgdir"

  # Copy the install scripts for reference (they'll be called from .install file)
  mkdir -p "$pkgdir/opt/xilinx/xrt/share/amdxdna/package"
  install -Dm755 /home/kashif/Downloads/xdna-driver/build/Release/package/postinst \
    "$pkgdir/opt/xilinx/xrt/share/amdxdna/package/postinst"
  install -Dm755 /home/kashif/Downloads/xdna-driver/build/Release/package/prerm \
    "$pkgdir/opt/xilinx/xrt/share/amdxdna/package/prerm"
}
